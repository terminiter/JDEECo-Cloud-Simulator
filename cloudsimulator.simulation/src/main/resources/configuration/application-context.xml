<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
	    http://www.springframework.org/schema/beans
	    http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		http://www.springframework.org/schema/aop/spring-aop.xsd
		http://www.springframework.org/schema/context 
		http://www.springframework.org/schema/context/spring-context-4.1.xsd
		http://www.springframework.org/schema/tx
		http://www.springframework.org/schema/tx/spring-tx-4.1.xsd">

	<!-- Import of properties -->
	<!-- <context:property-placeholder location=" classpath:properties/config.properties, classpath:properties/build.properties" 
		/> -->

	<!-- Statistics -->

	<bean id="statisticsHandler" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.simulation.logging.ProcessingStatisticsHandler"
		scope="singleton">
		<constructor-arg name="statisticsManager" ref="statisticsManager" />
	</bean>

	<bean id="statisticsManager" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.simulation.statistics.StatisticsManagerImpl"
		scope="singleton">
		<constructor-arg name="statisticsConfiguration" ref="statisticsConfiguration" />
		<constructor-arg name="statisticsProcessorFactoryProvider" ref="statisticsProcessorFactoryProvider" />
	</bean>

	<bean id="statisticsConfiguration" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.simulation.statistics.StatisticsConfigurationImpl"
		scope="singleton">
		<constructor-arg name="settingsProvider" ref="xmlSettingsProvider" />
		<constructor-arg name="statisticsProfileId" value="${TODO}" />
	</bean>

	<bean id="xmlSettingsProvider" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.simulation.settings.XmlSettingsProviderImpl"
		scope="singleton" />

	<bean id="statisticsProcessorFactoryProvider" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.simulation.statistics.StatisticsProcessorFactoryProviderImpl" />


	<!-- Asserts -->

	<bean id="assertHandler" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.asserts.AggregateAssertHandler" scope="singleton">
		<constructor-arg name="handlers">
			<list>
				<ref bean="loggingAssertHandler" />
				<!-- TODO exit assert handler -->
			</list>
		</constructor-arg>
	</bean>

	<bean id="loggingAssertHandler" class="cz.cuni.mff.d3s.jdeeco.cloudsimulator.simulation.logging.LoggingAssertHandler"
		scope="singleton" />
</beans>